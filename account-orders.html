<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <title>Account - QuackCommerce.com</title>
        <link rel="icon" type="image/png" href="images/logo/site-logo-only.jpg">
        <!-- MATERIAL DESIGN ICONIC FONT -->
		<link rel="stylesheet" href="fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
        <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" >
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css" integrity="sha512-UTNP5BXLIptsaj5WdKFrkFov94lDx+eBvbKyoe1YAfjeRPC+gT5kyZ10kOHCfNZqEui1sxmqvodNUx3KbuYI/A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdn.usebootstrap.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/helper.css">
        <link rel="stylesheet" href="style.css">
        <!-- Datatable -->
        <link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.bootstrap4.css">
        <!-- Datatable -->
        <script>
            if (sessionStorage.getItem('username') === 'guest') {
                sessionStorage.setItem('redirectToPage', 'account-orders.html')
                window.location.href = 'sign-in.html';
            }
        </script>
    </head>
    <body>
        <!-- Begin Body Wrapper -->
        <div class="body-wrapper">
            <!-- Begin Header Area -->
            <header class="header">
                <!-- Begin Header Top Area -->
                <div class="header-top">
                    <div class="container">
                        <div class="ht-menu">
                            <span>Telephone Enquiry: 1-(800)-876-543</span>
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li><a href="account-basic-info.html">My Account</a></li>
                                <li><a href="shopping-cart.html">Cart</a></li>
                                <li><a id="sign-in-link" href="sign-in.html">Sign In</a></li>    
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Header Top Area End Here -->
                <!-- Begin Header Middle Area -->
                <div class="header-middle">
                    <div class="container">
                        <div class="row">
                            <div class="col-3">
                                <div class="logo">
                                    <a href="index.html">
                                        <img src="images/logo/site-logo-only.jpg" alt="" style="width: 18%;">
                                        <span>QuackCommerce</span> 
                                    </a>
                                </div>
                            </div>
                            <div class="col-9">
                                <div class="hm-searchbox-area">
                                    <div class="hm-searchbox">
                                        <form id="searchForm">
                                            <select id="categorySelect">
                                                <option value="0">All</option>                         
                                                <option value="1">Laptops & Tablets</option>                     
                                                <option value="2">Electronics & Accessories</option>    
                                                <option value="3">Printers</option>
                                            </select>
                                            <input id="searchInput" type="text" placeholder="Search for anything at QuackCommerce online">
                                        </form>                                                                           
                                    </div>
                                    <p><a href="account-basic-info.html">Hello, <span id="greet-user">guest</span></a></p>
                                    <div class="cart-container">
                                        <a href="shopping-cart.html">
                                            <img src="images/icon/cart.png" alt="" width="50px">
                                            <span id="cart-number" class="cart-number">0</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Header Middle Area End Here -->
                <!-- Begin Header Bottom Area -->
                <div class="header-bottom header-sticky">
                    <div class="container">
                        <div class="hb-menu">
                            <nav>
                                <ul>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets">Laptops & Tablets</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets&subcategoryId=1&subcategoryName=Laptops">Laptops</a></li>
                                            <li><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets&subcategoryId=2&subcategoryName=Tablets">Tablets</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories">Electronics & Accessories</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=3&subcategoryName=Keyboards%20%26%20Mice">Keyboards & Mice</a></li>
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=4&subcategoryName=Audio">Audio</a></li>
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=5&subcategoryName=Hard%20Drives,%20SSDs%20%26%20Storage">Hard Drives, SSDs & Storage</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=3&categoryName=Printers">Printers</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=3&categoryName=Printers&subcategoryId=6&subcategoryName=Inkjet%20Printers">Inkjet Printers</a></li>
                                            <li><a href="product-grid-category.html?categoryId=3&categoryName=Printers&subcategoryId=7&subcategoryName=Laser%20Printers">Laser Printers</a></li>
                                        </ul>
                                    </li>
                                    <div class="hb-right">
                                        <li><a href="deals.html">Deals</a></li>
                                        <li><a href="product-grid-general.html?searchType=New%20Arrivals">New Arrivals</a></li>
                                        <li><a href="product-grid-general.html?searchType=Best%20Sellers">Best Sellers</a></li>
                                    </div>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <!-- Header Bottom Area End Here -->
            </header>
            <!-- Header Area End Here -->
            <!-- Begin Breadcrumb Area -->
            <div class="breadcrumb-area mb-20">
                <div class="container">
                    <div class="breadcrumb-content">
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li style="color: #808080;">Your Account</li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Breadcrumb Area End Here -->
            <!-- Begin Account Area -->
            <div class="account-area mb-50">
                <div class="container">
                    <div class="row">
                        <div class="col-3">
                            <div class="side-tab-block">
                                <div class="side-tab-header">
                                    <h3 style="font-weight: bold;">Manage Account</h3>
                                </div>
                                <hr>
                                <div class="side-tab"><a href="account-basic-info.html">Personal Info</a></div>
                                <div class="side-tab"><a href="account-addresses.html">Your Addresses</a></div>
                                <div class="side-tab"><a href="account-security.html">Security</a></div>
                            </div>
                            <div class="side-tab-block">
                                <div class="side-tab-header">
                                    <h3 style="font-weight: bold;">Other Info</h3>
                                </div>
                                <hr>
                                <div class="side-tab"><a href="account-orders.html">Order History</a></div>
                            </div>
                            <div class="side-tab-block">
                                <div class="side-tab-header">
                                    <h3 style="font-weight: bold;">Customer Service</h3>
                                </div>
                                <hr>
                                <div class="side-tab"><a href="">Help</a></div>
                                <div class="side-tab"><a href="">Terms of Use</a></div>
                            </div>
                        </div>
                        <div class="col-9">
                            <div class="product-tab">
                                <div class="section-title">
                                    <h2>
                                        <ul class="nav">
                                            <li><a id="placed-orders-tab" class="active" data-toggle="tab" href="#placed-orders">Placed Orders</a></li>
                                            <li><a id="delivered-orders-tab" data-toggle="tab" href="#delivered-orders">Delivered Orders</a></li>
                                            <li><a id="completed-orders-tab" data-toggle="tab" href="#completed-orders">Completed Orders</a></li>
                                         </ul>   
                                    </h2>
                                </div>
                            </div>
                            <div class="tab-content">
                                <div id="placed-orders" class="tab-pane active show" role="tabpanel">
                                    <div class="product-active owl-carousel">
                                        <table id="example1" class="table" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Orders</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- orders will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div id="delivered-orders" class="tab-pane" role="tabpanel">
                                    <div class="product-active owl-carousel">
                                        <table id="example2" class="table" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Orders</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- orders will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div id="completed-orders" class="tab-pane" role="tabpanel">
                                    <div class="product-active owl-carousel">
                                        <table id="example3" class="table" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Orders</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- orders will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Account Area End Here -->
            <!-- Begin Scroll Top  -->
            <div id="scrollToTop" class="mt-100">
                back to top
            </div>
            <!-- Scroll Top End Here -->
            <!-- Begin Footer Area -->
            <div class="footer pt-10 pb-10">
                <div class="container">
                    <div class="footer-wrap">
                        <div>
                            <ul style="margin-bottom: 20px;">
                                <li><a href="deals.html">Deals</a></li>
                                <li><a href="product-grid-general.html?searchType=New%20Arrivals">New products</a></li>
                                <li><a href="product-grid-general.html?searchType=Best%20Sellers">Best sales</a></li>
                                <li><a href="sign-in.html">Check Your Account</a></li>
                                <li><a href="sign-up.html">Be Our Customer</a></li>
                                <li><a href="account-orders.html">Track Your Orders</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                            </ul>
                            <label style="color: #fff;" for="fname">Payment by</label>
                            <img src="images/icon/Credit-Card-Icons.jpg" width="20%" alt="">
                        </div>   
                        <div>
                            <span style="font-size: 12px;">&copy 2024 QuackCommerce.com. All Rights Reserved.</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer Area End Here -->
        </div>
        <!-- Body Wrapper End Here -->
        <!-- Modal -->
        <div class="modal" id="reorder-modal" tabindex="-1" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Reorder</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <table class="reorder-table">
                            <!-- reorder items will be inserted here -->
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary my-button reorder-confirm-button">Add these to your cart</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <!-- Modal -->
        <div class="modal" id="view-order-details-modal" tabindex="-1" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div style="text-align: right; padding-right: 10px;">
                        <button style="width: auto;" type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="receipt-content">
                        <div class="row">
                            <div class="col-12">
                                <div class="invoice-wrapper">
                                    <div class="payment-info">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <span>Payment No.</span>
                                                <strong class="payment-number"></strong>
                                            </div>
                                            <div class="col-sm-6 text-right">
                                                <span>Payment Date</span>
                                                <strong class="payment-date"></strong>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="payment-details">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <span>Client</span>
                                                <strong class="username"></strong>
                                            </div>
                                            <div class="col-sm-6 text-right">
                                                <span>Payment To</span>
                                                <strong>
                                                    QuackCommerce
                                                </strong>
                                                <p>
                                                    123 Jalan Bukit Bintang <br>
                                                    Kuala Lumpur <br>
                                                    55100 <br>
                                                    Malaysia <br>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="line-items">
                                        <div class="headers clearfix">
                                            <div class="row">
                                                <div class="col-6">Description</div>
                                                <div class="col-3" style="text-align: center;">Purchased Quantity</div>
                                                <div class="col-3" style="text-align: right;">Unit Price (RM)</div>
                                            </div>
                                        </div>
                                        <div class="product-items">
                                            <!-- product items will be inserted here -->
                                        </div>
                                        <div class="total text-right" style="padding-top: 10px;">
                                            <p class="extra-notes">
                                                <strong>Extra Notes</strong>
                                                ---
                                            </p>
                                            <div class="field grand-total">
                                                Subtotal (RM) <span class="my-subtotal"></span>
                                            </div>
                                            <div class="field">
                                                Shipping <span>---</span>
                                            </div>
                                            <div class="field">
                                                Discount <span>---</span>
                                            </div>
                                            <div class="field grand-total">
                                                Total (RM) <span class="my-total"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.usebootstrap.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="js/main.js"></script>
        <!-- Datatable -->
        <script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>
        <script src="https://cdn.datatables.net/2.0.3/js/dataTables.bootstrap4.js"></script>
        <!-- Datatable -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {

                checkSignInStatus();
                getCartNumber();

                const userId = sessionStorage.getItem('userId');

                // populate placed orders
                populateOrders(userId, 'placed', 'example1');

                // Add event listeners to the tab elements
                document.getElementById('placed-orders-tab').addEventListener('click', function() {
                    populateOrders(userId, 'placed', 'example1');
                });

                document.getElementById('delivered-orders-tab').addEventListener('click', function() {
                    populateOrders(userId, 'delivered', 'example2');
                });

                document.getElementById('completed-orders-tab').addEventListener('click', function() {
                    populateOrders(userId, 'completed', 'example3');
                });

                // Add an event listener to the "reorder" buttons
                document.querySelector('.reorder-confirm-button').addEventListener('click', function() {
                    const productQuantityMap = {};

                    // Iterate through each row in the reorder table
                    document.querySelectorAll('.reorder-table tr').forEach(row => {
                        // Extract product ID and quantity from the row
                        const productId = row.querySelector('.product-id').value;
                        const quantity = parseInt(row.querySelector('.quantity-select select').value);

                        // Set the productId and quantity in the map
                        productQuantityMap[productId] = quantity;
                    });

                    fetch(`http://localhost:8080/carts/${userId}/cart-items`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(productQuantityMap)
                    })
                        .then(response => {
                            return response.json();
                        })
                        .then(cartItemIds => {
                            
                            let redirectURL = `shopping-cart.html`;

                            redirectURL += '?reorder=true';

                            window.location.href = redirectURL;
                        })
                        .catch(error => {
                            console.error(error);
                        });
                
                });


            });
        </script>
        <script>
            // Define a function to populate orders based on status
            function populateOrders(userId, status, tableId) {

                // Clear all other tables
                const allTables = document.querySelectorAll('.table');
                allTables.forEach(table => {
                    if (table.id !== tableId) {
                        table.getElementsByTagName('tbody')[0].innerHTML = '';
                    }
                });

                fetch(`http://localhost:8080/orders/by-status?userId=${userId}&${status}=true`)
                    .then(response => response.json())
                    .then(orders => {
                        let tableBody = document.getElementById(tableId).querySelector('tbody');
                        
                        orders.forEach(order => {
                            let newRow = tableBody.insertRow();

                            let orderDate = new Date(order.dateCreated);
                            let day = orderDate.toLocaleDateString('en-US', { weekday: 'long' });
                            let date = orderDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });

                            newRow.innerHTML = `
                                <td>
                                    <div class="row" style="background-color: #e7f1fd; padding: 5px; border: 2px solid #e1e1e1;">
                                        <div class="col-2">
                                            <p style="color: #808080; font-size: 12px;">ORDER PLACED</p>
                                            <p>${day}, ${date}</p>
                                        </div>
                                        <div class="col-2">
                                            <p style="color: #808080; font-size: 12px;">TOTAL AMT.</p>
                                            <p>RM ${order.totalAmount.toFixed(2)}</p>
                                        </div>
                                        <div class="col-8" style="text-align: right;">
                                            <p style="color: #808080; font-size: 12px;">ORDER NUMBER #</p>
                                            <p>${order.orderNumber}</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <input class="payment-date" type="hidden" value="${day}, ${date}">
                                        <div class="col-2">
                                            <img src="images/icon/no-image-icon-6-removebg-preview.png">
                                        </div>
                                        <div class="col-5">
                                            <input class="order-amount" type="hidden" value="${order.totalAmount.toFixed(2)}">
                                            <p style="font-weight: bold;">Order Number</p>
                                            <p>${order.orderNumber}</p>
                                            <hr style="margin-top: 10px; margin-bottom: 10px;">
                                            <p style="font-weight: bold;">Payment Number</p>
                                            <p class="payment-number">${order.paymentNumber}</p>
                                            <br>
                                        </div>
                                        <div class="col-2" style="text-align: right;">
                                            <p style="font-weight: bold;">Status</p>
                                            <p>${order.status}</p>
                                        </div>
                                        <div class="col-3" style="display: block;">
                                            <button class="my-button reorder-button" style="padding: 5px 10px; border-radius: 5px; width: 100%;" data-order-id="${order.id}" data-toggle="modal" data-target="#reorder-modal">Reorder these items</button>
                                            <button class="my-button-inverse view-details-button" style="margin-top: 10px; padding: 5px 10px; border-radius: 5px; width: 100%;" data-order-id="${order.id}" data-toggle="modal" data-target="#view-order-details-modal">View order details</button>
                                        </div>
                                    </div>
                                </td>
                            `;
                        });

                        // Add an event listener to the "reorder" buttons
                        document.querySelectorAll('.reorder-button').forEach(button => {
                            button.addEventListener('click', function() {
                                // Get the closest row element
                                const row = this.closest('.row');
                                const orderId = this.getAttribute('data-order-id');

                                fetch(`http://localhost:8080/orders/${orderId}`)
                                    .then(response => response.json())
                                    .then(order => {
                                        
                                        const reorderTable = document.querySelector('.reorder-table');
                                        reorderTable.innerHTML = '';
                        
                                        order.orderItemDtos.forEach(orderItem => {

                                            const productName = orderItem.productName.split('-')[0].trim();
                                            let selectOptions = '';

                                            for (let i = 1; i <= 10; i++) {
                                                const optionText = i === 1 ? 'Quantity: 1' : `${i}`;
                                                selectOptions += `<option value="${i}" ${i === orderItem.quantityPurchased ? 'selected' : ''}>${optionText}</option>`;
                                            }

                                            const productItemElement = document.createElement('tr');
                                            productItemElement.style.borderBottom = "1px solid #ccc";
                                            
                                            productItemElement.innerHTML = `
                                                <td>
                                                    <input class="product-id" type="hidden" value="${orderItem.productId}">
                                                    <div class="row">
                                                        <div class="col-4">
                                                            <div class="product-image">
                                                                <a href="product-details.html?productId=${orderItem.productId}">
                                                                    <img src="images/product/large-size/${orderItem.productName}.jpg" alt="Li's Product Image">
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="col-8">
                                                            <div class="cart-product-details">
                                                                <div>
                                                                    <p><a href="product-details.html?productId=${orderItem.productId}">${orderItem.productName}</a></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; width: 100px;">
                                                    <div class="quantity-select">
                                                        <select>
                                                            ${selectOptions}
                                                        </select>
                                                    </div>
                                                </td>
                                            `;

                                            reorderTable.append(productItemElement);

                                        });

                                    })
                                    .catch(error => {
                                        console.error(error);
                                    });


                            });
                        });

                        // Add an event listener to the "View order details" buttons
                        document.querySelectorAll('.view-details-button').forEach(button => {
                            button.addEventListener('click', function() {
                                // Get the closest row element
                                const row = this.closest('.row');
                                const orderId = this.getAttribute('data-order-id');

                                fetch(`http://localhost:8080/orders/${orderId}`)
                                    .then(response => response.json())
                                    .then(order => {

                                        let orderDate = new Date(order.dateCreated);
                                        let day = orderDate.toLocaleDateString('en-US', { weekday: 'long' });
                                        let date = orderDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                                        let time = orderDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric' }); // Get time

                                        document.querySelector('#view-order-details-modal .payment-number').textContent = order.paymentNumber;
                                        document.querySelector('#view-order-details-modal .payment-date').textContent = `${day}, ${date}, ${time}`; // Display time along with date
                                        document.querySelector('#view-order-details-modal .username').textContent = sessionStorage.getItem('username');
          
                                        const productItemsContainer = document.querySelector('.product-items');
                                        productItemsContainer.innerHTML = '';

                                        order.orderItemDtos.forEach(orderItem => {

                                            const productName = orderItem.productName.split('-')[0].trim();

                                            const productItemElement = document.createElement('div');
                                            productItemElement.classList.add('row');
                                            productItemElement.innerHTML = `
                                                <div class="col-6 product-item">${productName}</div>
                                                <div class="col-3 product-item" style="text-align: center;">${orderItem.quantityPurchased}</div>
                                                <div class="col-3 product-item" style="text-align: right;">${orderItem.unitPrice.toFixed(2)}</div>
                                            `;

                                            productItemsContainer.append(productItemElement);

                                        });

                                        document.querySelector('#view-order-details-modal .my-subtotal').textContent = order.totalAmount.toFixed(2);
                                        document.querySelector('#view-order-details-modal .my-total').textContent = order.totalAmount.toFixed(2);
                                    })
                                    .catch(error => {
                                        console.error(error);
                                    });


                            });
                        });

                        // Initialize DataTable
                        $(`#${tableId}`).DataTable();
                    })
                    .catch(error => {
                        console.error(error);
                    });
                }
        </script>
    </body>
</html>