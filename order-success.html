<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Checkout - QuackCommerce.com</title>
        <link rel="icon" type="image/png" href="images/logo/site-logo-only.jpg">
        <!-- MATERIAL DESIGN ICONIC FONT -->
		<link rel="stylesheet" href="fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
        <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" >
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css" integrity="sha512-UTNP5BXLIptsaj5WdKFrkFov94lDx+eBvbKyoe1YAfjeRPC+gT5kyZ10kOHCfNZqEui1sxmqvodNUx3KbuYI/A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdn.usebootstrap.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/helper.css">
        <link rel="stylesheet" href="style.css">
        <style>
            .track-line {
                height: 2px !important;
                background-color: #488978;
                opacity: 1;
            }
            .dot {
                height: 10px;
                width: 10px;
                margin-left: 3px;
                margin-right: 3px;
                margin-top: 0px;
                background-color: #488978;
                border-radius: 50%;
                display: inline-block
            }
            .big-dot {
                height: 25px;
                width: 25px;
                margin-left: 0px;
                margin-right: 0px;
                margin-top: 0px;
                background-color: #488978;
                border-radius: 50%;
                display: inline-block;
            }
            .big-dot i {
                font-size: 12px;
            }
            .card-stepper {
                z-index: 0
            }
        </style>
    </head>
    <body>
        <!-- Begin Body Wrapper -->
        <div class="body-wrapper">
            <!-- Begin Header Area -->
            <header class="header">
                <!-- Begin Header Top Area -->
                <div class="header-top">
                    <div class="container">
                        <div class="ht-menu">
                            <span>Telephone Enquiry: 1-(800)-876-543</span>
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li><a href="account-basic-info.html">My Account</a></li>
                                <li><a href="shopping-cart.html">Cart</a></li>
                                <li><a id="sign-in-link" href="sign-in.html">Sign In</a></li>    
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Header Top Area End Here -->
                <!-- Begin Header Middle Area -->
                <div class="header-middle">
                    <div class="container">
                        <div class="row">
                            <div class="col-3">
                                <div class="logo">
                                    <a href="index.html">
                                        <img src="images/logo/site-logo-only.jpg" alt="" style="width: 18%;">
                                        <span>QuackCommerce</span> 
                                    </a>
                                </div>
                            </div>
                            <div class="col-9">
                                <div class="hm-searchbox-area">
                                    <div class="hm-searchbox">
                                        <form id="searchForm">
                                            <select id="categorySelect">
                                                <option value="0">All</option>                         
                                                <option value="1">Laptops & Tablets</option>                     
                                                <option value="2">Electronics & Accessories</option>    
                                                <option value="3">Printers</option>
                                            </select>
                                            <input id="searchInput" type="text" placeholder="Search for anything at QuackCommerce online">
                                        </form>                                                                           
                                    </div>
                                    <p><a href="account-basic-info.html">Hello, <span id="greet-user">guest</span></a></p>
                                    <div class="cart-container">
                                        <a href="shopping-cart.html">
                                            <img src="images/icon/cart.png" alt="" width="50px">
                                            <span id="cart-number" class="cart-number">0</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Header Middle Area End Here -->
                <!-- Begin Header Bottom Area -->
                <div class="header-bottom header-sticky mb-50">
                    <div class="container">
                        <div class="hb-menu">
                            <nav>
                                <ul>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets">Laptops & Tablets</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets&subcategoryId=1&subcategoryName=Laptops">Laptops</a></li>
                                            <li><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets&subcategoryId=2&subcategoryName=Tablets">Tablets</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories">Electronics & Accessories</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=3&subcategoryName=Keyboards%20%26%20Mice">Keyboards & Mice</a></li>
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=4&subcategoryName=Audio">Audio</a></li>
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=5&subcategoryName=Hard%20Drives,%20SSDs%20%26%20Storage">Hard Drives, SSDs & Storage</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=3&categoryName=Printers">Printers</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=3&categoryName=Printers&subcategoryId=6&subcategoryName=Inkjet%20Printers">Inkjet Printers</a></li>
                                            <li><a href="product-grid-category.html?categoryId=3&categoryName=Printers&subcategoryId=7&subcategoryName=Laser%20Printers">Laser Printers</a></li>
                                        </ul>
                                    </li>
                                    <div class="hb-right">
                                        <li><a href="product-grid-general.html?searchType=New%20Arrivals">New Arrivals</a></li>
                                        <li><a href="product-grid-general.html?searchType=Best%20Sellers">Best Sellers</a></li>
                                    </div>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <!-- Header Bottom Area End Here -->
            </header>
            <!-- Header Area End Here -->
            <!-- Summary Area Begin Here -->
            <div class="summary-area mb-20">
                <div class="container" style="text-align: center;">
                    <p style="font-size: 24px;">Your order has been placed successfully.</p>
                    <br>
                    <hr>
                    <br>
                    <p>Your order number is <a class="link-inverse" href="" id="order-number"></a>. Your items will be delivered in 2 - 5 business days.</p>
                </div>
            </div>
            <!-- Summary Area End Here -->
            <!-- Order Track Begin Here -->
            <section class="order-track-area" style="background-color: #eee;">
                <div class="container py-5 h-100">
                    <div class="row d-flex justify-content-center align-items-center h-100">
                        <div class="col">
                            <div class="card card-stepper" style="border-radius: 10px;">
                                <div class="card-body p-4">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex flex-column">
                                            <span class="lead fw-normal">Your order will be delivered</span>
                                            <span class="text-muted small">by DHFL in 2 - 5 business days</span>
                                        </div>
                                        <div>
                                            <button class="btn btn-outline-primary" type="button">View all orders</button>
                                        </div>
                                    </div>
                                    <hr class="my-4">
                                    <div class="d-flex flex-row justify-content-between align-items-center align-content-center">
                                        <span class="d-flex justify-content-center align-items-center big-dot dot">
                                        <i class="fa fa-check text-white"></i></span>
                                        <hr class="flex-fill track-line">
                                        <span class="dot"></span>
                                        <hr class="flex-fill track-line"><span class="dot"></span>
                                    </div>
                                    <div class="d-flex flex-row justify-content-between align-items-center" style="margin-top: 5px;">
                                        <div class="d-flex flex-column justify-content-center">
                                            <span id="order-date"></span><span>Order placed</span>
                                        </div>
                                        <div class="d-flex flex-column align-items-center">
                                            <span>TBD</span><span>Order delivered</span>
                                        </div>
                                        <div class="d-flex flex-column align-items-end">
                                            <span>TBD</span><span>Order completed</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Order Track End Here -->
            <!-- Order Details Begin Here -->
            <div class="order-details mt-20">
                <div class="container">
                    <div class="row">
                        <div class="col-5">
                            <div class="order-details-container" style="margin-bottom: 10px;">
                                <!-- order details will be inserted here -->
                            </div>
                        </div>
                        <div class="col-7" style="text-align: right;">
                            <button class="my-button-inverse"><a href="index.html">Back to shopping</a></button>
                        </div>
                    </div>
                    
                </div>
            </div>
            <!-- Order Details End Here -->
            <!-- Begin Scroll Top  -->
            <div id="scrollToTop" class="mt-100">
                back to top
            </div>
            <!-- Scroll Top End Here -->
            <!-- Begin Footer Area -->
            <div class="footer pt-10 pb-10">
                <div class="container">
                    <div class="footer-wrap">
                        <div>
                            <ul style="margin-bottom: 20px;">
                                <li><a href="deals.html">Deals</a></li>
                                <li><a href="product-grid-general.html?searchType=New%20Arrivals">New products</a></li>
                                <li><a href="product-grid-general.html?searchType=Best%20Sellers">Best sales</a></li>
                                <li><a href="sign-in.html">Check Your Account</a></li>
                                <li><a href="sign-up.html">Be Our Customer</a></li>
                                <li><a href="account-orders.html">Track Your Orders</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                            </ul>
                            <label style="color: #fff;" for="fname">Payment by</label>
                            <img src="images/icon/Credit-Card-Icons.jpg" width="20%" alt="">
                        </div>   
                        <div>
                            <span style="font-size: 12px;">&copy 2024 QuackCommerce.com. All Rights Reserved.</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer Area End Here -->
        </div>
        <!-- Body Wrapper End Here -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.usebootstrap.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="js/main.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                checkSignInStatus();
                getCartNumber();

                const userId = sessionStorage.getItem('userId');

                const params = new URLSearchParams(window.location.search);
                const orderNumber = params.get('orderNumber');

                

                //fetch order details
                fetch(`http://localhost:8084/orders/${userId}?orderNumber=${orderNumber}`)
                    .then(response => {
                        return response.json();
                    })
                    .then(order => {
                        //set the order details
                        document.getElementById('order-number').textContent = order.orderNumber;
                        
                        // Convert date string to Date object
                        const orderDate = new Date(order.dateCreated);

                        // Get day, month, and year
                        const day = orderDate.getDate();
                        const month = orderDate.getMonth() + 1; // Months are zero-based, so add 1
                        const year = orderDate.getFullYear();

                        let hours = orderDate.getHours();
                        const ampm = hours >= 12 ? 'PM' : 'AM';
                        hours = hours % 12 || 12; // Convert 0 to 12 for 12-hour format
                        const minutes = orderDate.getMinutes();

                        const formattedDate = `${day}-${month}-${year}   ${hours}:${minutes} ${ampm}`;
                        document.getElementById('order-date').textContent = formattedDate;

                        // set order details table
                        const orderDetailsContainer = document.querySelector('.order-details-container');
                        orderDetailsContainer.innerHTML = `
                            <table class="specifications">
                                <tr>
                                    <td style="font-weight: bold;">Order Number</td>
                                    <td>${order.orderNumber}</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold;">Payment Number</td>
                                    <td>${order.paymentNumber}</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold;">Date Created</td>
                                    <td>${formattedDate}</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold;">Total Amount</td>
                                    <td>RM ${order.totalAmount.toFixed(2)}</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold;">Status</td>
                                    <td>${order.status}</td>
                                </tr>
                            </table>
                        `;
                    })
                    .catch(error => {
                        console.error(error);
                    });
            });
        </script>
    </body>
</html>