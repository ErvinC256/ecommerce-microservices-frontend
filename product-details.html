<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <title>QuackCommerce.com</title>
        <link rel="icon" type="image/png" href="images/logo/site-logo-only.jpg">
        <!-- MATERIAL DESIGN ICONIC FONT -->
		<link rel="stylesheet" href="fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
        <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css" integrity="sha512-UTNP5BXLIptsaj5WdKFrkFov94lDx+eBvbKyoe1YAfjeRPC+gT5kyZ10kOHCfNZqEui1sxmqvodNUx3KbuYI/A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdn.usebootstrap.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/helper.css">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <!-- Begin Body Wrapper -->
        <div class="body-wrapper">
            <!-- Begin Header Area -->
            <header class="header">
                <!-- Begin Header Top Area -->
                <div class="header-top">
                    <div class="container">
                        <div class="ht-menu">
                            <span>Telephone Enquiry:(+123) 123 321 345</span>
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li><a href="account-basic-info.html">My Account</a></li>
                                <li><a href="shopping-cart.html">Cart</a></li>
                                <li><a id="sign-in-link" href="sign-in.html">Sign In</a></li>    
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Header Top Area End Here -->
                <!-- Begin Header Middle Area -->
                <div class="header-middle">
                    <div class="container">
                        <div class="row">
                            <div class="col-3">
                                <div class="logo">
                                    <a href="index.html">
                                        <img src="images/logo/site-logo-only.jpg" alt="" style="width: 18%;">
                                        <span>QuackCommerce</span> 
                                    </a>
                                </div>
                            </div>
                            <div class="col-9">
                                <div class="hm-searchbox-area">
                                    <div class="hm-searchbox">
                                        <form id="searchForm">
                                            <select id="categorySelect">
                                                <option value="0">All</option>                         
                                                <option value="1">Laptops & Tablets</option>                     
                                                <option value="2">Electronics & Accessories</option>    
                                                <option value="3">Printers</option>
                                            </select>
                                            <input id="searchInput" type="text" placeholder="Search for anything at QuackCommerce online">
                                        </form>                                                                           
                                    </div>
                                    <p><a href="account-basic-info.html">Hello, <span id="greet-user">guest</span></a></p>
                                    <div class="cart-container">
                                        <a href="shopping-cart.html">
                                            <img src="images/icon/cart.png" alt="" width="50px">
                                            <span id="cart-number" class="cart-number">0</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Header Middle Area End Here -->
                <!-- Begin Header Bottom Area -->
                <div class="header-bottom header-sticky">
                    <div class="container">
                        <div class="hb-menu">
                            <nav>
                                <ul>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets">Laptops & Tablets</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets&subcategoryId=1&subcategoryName=Laptops">Laptops</a></li>
                                            <li><a href="product-grid-category.html?categoryId=1&categoryName=Laptops%20%26%20Tablets&subcategoryId=2&subcategoryName=Tablets">Tablets</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories">Electronics & Accessories</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=3&subcategoryName=Keyboards%20%26%20Mice">Keyboards & Mice</a></li>
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=4&subcategoryName=Audio">Audio</a></li>
                                            <li><a href="product-grid-category.html?categoryId=2&categoryName=Electronics%20%26%20Accessories&subcategoryId=5&subcategoryName=Hard%20Drives,%20SSDs%20%26%20Storage">Hard Drives, SSDs & Storage</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown-holder"><a href="product-grid-category.html?categoryId=3&categoryName=Printers">Printers</a>
                                        <ul class="hb-dropdown">
                                            <li><a href="product-grid-category.html?categoryId=3&categoryName=Printers&subcategoryId=6&subcategoryName=Inkjet%20Printers">Inkjet Printers</a></li>
                                            <li><a href="product-grid-category.html?categoryId=3&categoryName=Printers&subcategoryId=7&subcategoryName=Laser%20Printers">Laser Printers</a></li>
                                        </ul>
                                    </li>
                                    <div class="hb-right">
                                        <li><a href="product-grid-general.html?searchType=New%20Arrivals">New Arrivals</a></li>
                                        <li><a href="product-grid-general.html?searchType=Best%20Sellers">Best Sellers</a></li>
                                    </div>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <!-- Header Bottom Area End Here -->
            </header>
            <!-- Header Area End Here -->
            <!-- Begin Breadcrumb Area -->
            <div class="breadcrumb-area mb-20">
                <div class="container">
                    <div class="breadcrumb-content">
                        <ul>
                            <li><a href="index.html">Home</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Breadcrumb Area End Here -->
            <!-- Begin Product Details Area -->
            <div class="product-details-area mb-50">
                <div class="container">
                    <!-- product details will be inserted here -->
                </div>
            </div>
            <!-- Product Details Area End Here -->
            <!-- Begin Product Info Area -->
            <div class="specifications-area mb-50">
                <div class="container">
                    <div class="row">
                        <div class="col-6">
                            <div class="product-tab">
                                <div class="section-title">
                                    <h2>
                                        <ul class="nav">
                                            <li><a class="active" data-toggle="tab" href="#specifications">Specifications</a></li>
                                            <li><a data-toggle="tab" href="#warranty">Warranty</a></li>
                                         </ul>  
                                    </h2>
                                </div>             
                            </div>
                            <div class="tab-content">
                                <div id="specifications" class="tab-pane active show" role="tabpanel">
                                    <table class="specifications">
                                        <!-- product information will be inserted here -->
                                    </table>   
                                </div>
                                <div id="warranty" class="tab-pane" role="tabpanel">
                                    <div class="warranty">
                                        <div>
                                            <p><strong>Limited Warranty</strong></p>
                                            <br>
                                            <p style="font-size: 12px;">We warrant that this product is free from defects under normal use for 1 year from the date of purchase.</p>
                                        </div>
                                        <div>
                                            <p><strong>Coverage</strong></p>
                                            <br>
                                            <p style="font-size: 12px;">Covers manufacturing defects. If found within the warranty period, we will repair or replace it at no charge.</p>
                                        </div>
                                        <div>
                                            <p><strong>Exclusions</strong></p>
                                            <br>
                                            <p style="font-size: 12px;">Does not cover damage from accidents, misuse, abuse, negligence, unauthorized repair, alterations, etc.</p>
                                        </div>
                                        <div>
                                            <p><strong>Service</strong></p>
                                            <br>
                                            <p style="font-size: 12px;">Contact our customer service with proof of purchase for warranty service.</p>
                                        </div>
                                        <div>
                                            <p><strong>Liability Limitation</strong></p>
                                            <br>
                                            <p style="font-size: 12px;">Our liability is limited to repairing or replacing the defective product.</p>
                                        </div>
                                        <div style="text-align: right; border: none;">
                                            <a href="" class="link-inverse" data-toggle="modal" data-target="#warrantyModal">Learn more</a>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <div class="col-6">
                            <i class="fa-solid fa-newspaper" style="margin-right: 10px;"></i><a href="" id="report-link" class="link-inverse" data-toggle="modal" data-target="#reportModal">Report an issue with this product</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Product Info Area End Here -->
            <!-- Begin Similar Items Area -->
            <div class="similar-area mb-50">
                <div class="container">
                    <div class="section-title">
                        <h2>You may also like</h2>
                    </div>
                    <div class="row">
                        <div class="product-active owl-carousel">
                            <!-- //products will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Similar Items Area End here -->
            <!-- Begin Scroll Top  -->
            <div id="scrollToTop" class="mt-100">
                back to top
            </div>
            <!-- Scroll Top End Here -->
            <!-- Begin Footer Area -->
            <div class="footer pt-20 pb-20">
                <div class="container">
                    <div class="footer-wrap">
                        <div>
                            <ul>
                                <li><a href="help-center.html">Terms & Conditions</a></li>
                                <li><a href="#">New products</a></li>
                                <li><a href="#">Best sales</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="#">Delivery</a></li>
                                <li><a href="#">Legal Notice</a></li>
                                <li><a href="#">About us</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="#">Prices drop</a></li>
                                <li><a href="#">New products</a></li>
                                <li><a href="#">Best sales</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="#">Delivery</a></li>
                                <li><a href="#">Legal Notice</a></li>
                                <li><a href="#">About us</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="#">Prices drop</a></li>
                                <li><a href="#">New products</a></li>
                                <li><a href="#">Best sales</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="#">Delivery</a></li>
                                <li><a href="#">Legal Notice</a></li>
                                <li><a href="#">About us</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                            </ul>
                        </div>   
                        <div>
                            <span style="font-size: 12px;">&copy 2024 QuackCommerce.com. All Rights Reserved.</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer Area End Here -->
        </div>
        <!-- Body Wrapper End Here -->
        <div id="popup"></div>
        <!-- Modal -->
        <div class="modal" id="warrantyModal" tabindex="-1" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Product Warranty Information</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <p><strong>Limited Warranty</strong></p>
                            <p style="font-size: 12px;">We warrant that this product is free from defects in materials and workmanship under normal use for 1 year from the date of purchase. This warranty is non-transferable and covers the original purchaser only.</p>
                        </div>
                        <div>
                            <p><strong>Coverage</strong></p>
                            <p style="font-size: 12px;">Covers manufacturing defects. If found within the warranty period, we'll repair or replace it at no charge.</p>
                        </div>
                        <div>
                            <p><strong>Exclusions</strong></p>
                            <p style="font-size: 12px;">Does not cover damage from accidents, misuse, abuse, negligence, unauthorized repair, alterations, normal wear and tear, cosmetic damage, or improper maintenance/installation.</p>
                        </div>
                        <div>
                            <p><strong>Service</strong></p>
                            <p style="font-size: 12px;">Contact our customer service with proof of purchase for warranty service. Follow their instructions for returning the product.</p>
                        </div>
                        <div>
                            <p><strong>Liability Limitation</strong></p>
                            <p style="font-size: 12px;">Our liability is limited to repairing or replacing the defective product. We are not liable for indirect, consequential, or incidental damages resulting from product use.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal" id="reportModal" tabindex="-1" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Report Product Issue</h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form action="">
                            <label for="productIssue">Select the product issue</label>
                            <select name="productIssue" id="productIssue">
                                <option value="defective">Defective product</option>
                                <option value="missing-parts">Missing parts</option>
                                <option value="damaged">Damaged during shipping</option>
                                <option value="wrong-item">Received wrong item</option>
                                <option value="other">Other</option>
                            </select>
                            <hr style="margin-top: 10px; margin-bottom: 5px;">
                            <label for="productIssue">Comments</label>
                            <textarea name="" id="" cols="30" rows="10" placeholder="Enter comments here - optional"></textarea>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button id="submit-button" type="button" class="btn btn-primary my-button">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.usebootstrap.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="js/jquery.meanmenu.min.js"></script>
        <script src="js/main.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {

                checkSignInStatus();
                getCartNumber();

                let categoryId;
                let subcategoryId;

                const params = new URLSearchParams(window.location.search);
                const productId = params.get('product');

                // fetch product details
                fetch(`http://localhost:8080/products/${productId}`) 
                    .then(response => {
                        return response.json();
                    })
                    .then(product => {
                        categoryId = product.categoryId;
                        subcategoryId = product.subcategoryId;

                        // Get the breadcrumb list
                        let breadcrumbList = document.querySelector('.breadcrumb-content ul');

                        // Set the breadcrumb content
                        let categoryLi = document.createElement('li');
                        categoryLi.innerHTML = `<a href="product-grid-category.html?categoryId=${product.categoryId}&categoryName=${encodeURIComponent(product.categoryName)}">${product.categoryName}</a>`;
                        breadcrumbList.appendChild(categoryLi);

                        let subcategoryLi = document.createElement('li');
                        subcategoryLi.innerHTML = `<a href="product-grid-category.html?categoryId=${product.categoryId}&categoryName=${encodeURIComponent(product.categoryName)}&subcategoryId=${product.subcategoryId}&subcategoryName=${encodeURIComponent(product.subcategoryName)}">${product.subcategoryName}</a>`;
                        breadcrumbList.appendChild(subcategoryLi);

                        let emptyLi = document.createElement('li');
                        emptyLi.innerHTML = '';
                        breadcrumbList.appendChild(emptyLi);

                        const productsContainer = document.querySelector('.product-details-area .container');
                        const productElement = document.createElement('div');
                        productElement.className = 'row';
                        productElement.innerHTML = `
                            <div class="col-4">
                                <div class="product-image">
                                    <img src="images/product/large-size/${product.productName}.jpg" alt="product image">
                                    <p>Images for illustrative purposes only - actual items may differ from images or based on configurations selected.</p>
                                </div>       
                            </div>
                            <div class="col-8">
                                <div class="product-basic-details">
                                    <div style="border-bottom: 1px solid #e1e1e1;">
                                        <h2>${product.productName}</h2>
                                        <p>by
                                            <a href="#"
                                                class="link-inverse";
                                                onclick="event.preventDefault(); 
                                                window.location.href='product-grid-general.html?searchType=${encodeURIComponent(product.manufacturer)}'">
                                                ${product.manufacturer}
                                            </a>    
                                        </p>
                                        <p style="margin-top: 15px;">${product.description}</p>
                                    </div>
                                    <div class="row">
                                        <div class="col-7">
                                            <div class="add-to-cart-div">
                                                <div class="product-tag-container2">
                                                    ${product.productTag.newArrival ? '<div class="product-tag new-arrival"> New Arrival</div>' : ''}
                                                    ${product.productTag.bestSeller ? '<div class="product-tag best-seller">Best Seller</div>' : ''}
                                                </div>
                                                <div class="price-div">
                                                    <p style="font-size: 24px; font-weight: bold;">RM ${product.price.toFixed(2)}</p>
                                                    <p style="font-size: 12px;">
                                                        Price above includes tax.
                                                    </p>
                                                </div>
                                                <div>
                                                    <form action="#"></form>
                                                        <div class="quantity-select">
                                                            <select style="width: 50%;">
                                                                <option value="1">Quantity: 1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                                <option value="5">5</option>
                                                                <option value="6">6</option>
                                                                <option value="7">7</option>
                                                                <option value="8">8</option>
                                                                <option value="9">9</option>
                                                                <option value="10">10</option>
                                                            </select>
                                                            <span style="color: #CD5C5C;">${product.quantityInStock} units available</span>
                                                        </div>
                                                        <input type="hidden" name="product-id" value="${product.productId}">
                                                        <div style="margin-top: 10px;">
                                                            <button type="submit" id="add-to-cart" class="my-button" style="margin-right: 10px;">Add to cart</button>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="block-reassurance">
                                                    <table>
                                                        <tr>
                                                            <td>
                                                                <i class="fas fa-shipping-fast"></i>
                                                            </td>
                                                            <td>
                                                                <div class="my-tooltip" >Timely and Reliable Delivery<i class="fa fa-info-circle" style="color: #0000FF; margin-left: 5px;"></i>
                                                                    <div class="tooltip-position">
                                                                        <div class="tooltip-top">
                                                                            <p>Timely and Reliable Delivery</p>
                                                                        </div>
                                                                        <div class="tooltip-bottom">
                                                                            <p>You can expect your orders to arrive consistently on schedule, backed by a reliable delivery service.</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <i class="fas fa-exchange"></i>
                                                            </td>
                                                            <td>
                                                                <div class="my-tooltip">Eligible for Return, Refund or Replacement within 30 Days<i class="fa fa-info-circle" style="color: #0000FF; margin-left: 5px;"></i>
                                                                    <div class="tooltip-position">
                                                                        <div class="tooltip-top">
                                                                            <p>Eligible for Return, Refund or Replacement within 30 Days</p>
                                                                        </div>
                                                                        <div class="tooltip-bottom">
                                                                            <p>You can return this product in its original state within 30 days of receiving it for a full refund or a replacement.</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <i class="far fa-credit-card"></i>
                                                            </td>
                                                            <td>
                                                                <div class="my-tooltip">Secure Transaction<i class="fa fa-info-circle" style="color: #0000FF; margin-left: 5px;"></i>
                                                                    <div class="tooltip-position">
                                                                        <div class="tooltip-top">
                                                                            <p>Secure Transaction</p>
                                                                        </div>
                                                                        <div class="tooltip-bottom">
                                                                            <p>Our relentless commitment is to ensure the utmost protection for your security and privacy, and to safeguard your sensitive information.</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </table>                                
                                                </div>    
                                            </div>
                                        </div>
                                        <div class="col-5">
                                            <div class="product-basic-details-container">
                                                <div style="margin-bottom: 25px;">
                                                    <a style="font-size: 12px; color: #0000FF; font-weight: bold;" href="product-grid-category.html?categoryId=${product.categoryId}&categoryName=${encodeURIComponent(product.categoryName)}">
                                                        ${capitalize(product.categoryName)}
                                                    </a>
                                                </div>
                                                <hr>
                                                <table>
                                                    <tr>
                                                        <th>Manufacturer</td>
                                                        <td><img src="images/logo/manufacturer's logo/${product.manufacturer}.jpg" title="${product.manufacturer}" width="50%"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Ships from</td>
                                                        <td>QuackCommerce.com</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Sold by</td>
                                                        <td>QuackCommerce.com</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Delivery</th>
                                                        <td>
                                                            <p>Estimated between Jan 1, 2024 and Jan 3, 2024.</p> 
                                                            <p id="moreText" style="display: none; color: #CD5C5C;">Delivery time varies based on buyer proximity, chosen postage, seller history, and factors, especially during peak periods.</p>
                                                            <a href="#" id="moreLink" onclick="showMore(event)" class="link-inverse">See more details <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                                                            <a href="#" id="lessLink" style="display: none;" onclick="showLess(event)" class="link-inverse">See less details <i class="fa fa-angle-up" aria-hidden="true"></i></a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>Returns</td>
                                                        <td>Returnable until Jan 31, 2024. Buyer pays for return shipping.</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>  
                                </div>
                            </div> 
                        `;
                        productsContainer.appendChild(productElement);

                        // populate info table
                        let table = document.querySelector("#specifications table");
                        product.productSpecs.map(spec => {
                            let row = document.createElement("tr");
                            let nameCell = document.createElement("td");
                            let valueCell = document.createElement("td");

                            nameCell.textContent = spec.specName;
                            valueCell.textContent = spec.specValue;

                            row.appendChild(nameCell);
                            row.appendChild(valueCell);

                            table.appendChild(row);
                        });

                        document.querySelector('#add-to-cart').addEventListener('click', function(e) {
                            e.preventDefault();

                            // Get user id from session
                            const userId = sessionStorage.getItem('userId');

                            const productId = document.querySelector('input[name="product-id"]').value;
                            const quantity = document.querySelector('.quantity-select select').value;

                            // add item to cart
                            fetch(`http://localhost:8080/carts/${userId}/cart-items`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ 
                                    productId: productId, 
                                    quantity: quantity 
                                }),
                            })
                                .then(response => {
                                    if (!response.ok) {
                                        return response.json().then(errorData => {
                                            throw new Error(errorData.message);
                                        });
                                    }
                                    return response.json();
                                })
                                .then((cartItem) => {
                                    window.location.href = `added-cart.html?productId=${productId}&cartItemId=${cartItem.id}`;
                                })
                                .catch(error => {
                                    console.error(error.message);
                                });
                        });

                        //load similar items data
                        fetch(`http://localhost:8080/products?categoryId=${categoryId}&subcategoryId=${subcategoryId}&page=0&size=10`) 
                            .then(response => {
                                return response.json();
                            })
                            .then(products => {
                                const productsContainer = document.querySelector('.similar-area .owl-carousel');
                                productsContainer.innerHTML = '';
                                products.content.forEach(product => {
                                    const productElement = generateSingleProduct(product);
                                    productsContainer.appendChild(productElement);

                                });
                                initializeOwlCarousel(productsContainer);
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    })
                    .catch(error => {
                        console.error(error);
                    });
                
                // report link
                const reportLink = document.querySelector('#report-link');
                reportLink.addEventListener('click', function() {

                    document.querySelector('#reportModal form').reset();
                });

                const submitBtn = document.getElementById('submit-button');
                const closeBtn = document.querySelector('#reportModal .close');
                const popup = document.getElementById('popup');
        
                submitBtn.addEventListener('click', function () {
                    
                    closeBtn.click();
                    // Show the popup
                    popup.textContent = 'Report submitted successfully'
                    popup.style.display = 'block';
        
                    // Hide the popup after 3 seconds
                    setTimeout(function () {
                        popup.style.display = 'none';

                    }, 3000);
                });

            });
        </script>
        <script>
            function showMore(e) {
                e.preventDefault();
                document.getElementById('moreText').style.display = 'inline';
                document.getElementById('moreLink').style.display = 'none';
                document.getElementById('lessLink').style.display = 'inline';
            }
        
            function showLess(e) {
                e.preventDefault();
                document.getElementById('moreText').style.display = 'none';
                document.getElementById('moreLink').style.display = 'inline';
                document.getElementById('lessLink').style.display = 'none';
            }

            function capitalize(str) {
                return str.toUpperCase();
            }
        </script>
    </body>
</html>
